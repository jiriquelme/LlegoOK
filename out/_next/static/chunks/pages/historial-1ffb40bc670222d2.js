(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{5536:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/historial",function(){return a(234)}])},234:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(4848),i=a(6540),s=a(4335),l=a(141),r=a.n(l),o=a(6715);function d(){let[e,t]=(0,i.useState)([]),[a,l]=(0,i.useState)(null),[d,c]=(0,i.useState)(""),[h,_]=(0,i.useState)(""),[u,p]=(0,i.useState)(1),[g]=(0,i.useState)(10),x=(0,o.useRouter)();(0,i.useEffect)(()=>{(async()=>{try{let e=[],a="http://34.29.123.189/encomiendas/";for(;a;){let t=await s.A.get(a);e=[...e,...t.data.results],a=t.data.next}t(e)}catch(e){console.error("Error al obtener los datos de encomiendas:",e.message),l("No se pudieron cargar las encomiendas.")}})()},[]);let j=e=>{_(e),p(1)},m=e.filter(e=>e.residente.toLowerCase().includes(d)||e.departamento.toLowerCase().includes(d)).filter(e=>"entregado"===h?"Entregado"===e.estado:"pendiente"!==h||"Pendiente"===e.estado),N=Math.ceil(m.length/g),b=u*g,B=m.slice(b-g,b);return(0,n.jsxs)("div",{className:r().container,children:[(0,n.jsx)("h1",{className:r().title,children:"Historial de Encomiendas"}),(0,n.jsx)("button",{className:r().backButton,onClick:()=>x.push("/"),children:"← Volver"}),(0,n.jsxs)("div",{className:r().filters,children:[(0,n.jsx)("input",{type:"text",className:r().searchInput,placeholder:"Buscar por departamento o residente...",onChange:e=>{c(e.target.value.toLowerCase()),p(1)}}),(0,n.jsxs)("div",{className:r().filterButtons,children:[(0,n.jsx)("button",{className:"".concat(r().filterButton," ").concat(""===h&&r().activeFilter),onClick:()=>j(""),children:"Todos"}),(0,n.jsx)("button",{className:"".concat(r().filterButton," ").concat("entregado"===h&&r().activeFilter),onClick:()=>j("entregado"),children:"Entregados"}),(0,n.jsx)("button",{className:"".concat(r().filterButton," ").concat("pendiente"===h&&r().activeFilter),onClick:()=>j("pendiente"),children:"Pendientes"})]})]}),a?(0,n.jsx)("p",{className:r().error,children:a}):(0,n.jsxs)("div",{className:r().tableContainer,children:[(0,n.jsxs)("table",{className:r().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Fecha de Llegada"}),(0,n.jsx)("th",{children:"Departamento"}),(0,n.jsx)("th",{children:"Residente"}),(0,n.jsx)("th",{children:"Estado"})]})}),(0,n.jsx)("tbody",{children:B.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:new Date(e.Fecha_Llegada).toLocaleString()}),(0,n.jsx)("td",{children:e.departamento}),(0,n.jsx)("td",{children:e.residente}),(0,n.jsx)("td",{className:"Pendiente"===e.estado?r().pendingBadge:r().deliveredBadge,children:e.estado})]},e.id))})]}),(0,n.jsxs)("div",{className:r().pagination,children:[(0,n.jsx)("button",{className:r().paginationButton,onClick:()=>{u>1&&p(u-1)},disabled:1===u,children:"Anterior"}),(0,n.jsxs)("span",{children:["P\xe1gina ",u," de ",N]}),(0,n.jsx)("button",{className:r().paginationButton,onClick:()=>{u<N&&p(u+1)},disabled:u===N,children:"Siguiente"})]})]})]})}},141:e=>{e.exports={container:"historial_container__p18Am",title:"historial_title__kWak1",backButton:"historial_backButton__8Z7vS",filters:"historial_filters__TQv40",searchInput:"historial_searchInput__TcNrX",filterButtons:"historial_filterButtons__2jlz_",filterButton:"historial_filterButton__TNnhM",activeFilter:"historial_activeFilter__Nrb_o",tableContainer:"historial_tableContainer__DvRFs",table:"historial_table__LL9ll",deliveredBadge:"historial_deliveredBadge__e8M4F",pendingBadge:"historial_pendingBadge__XTuyB",pagination:"historial_pagination__JEHV_",paginationButton:"historial_paginationButton__onFhe"}}},e=>{var t=t=>e(e.s=t);e.O(0,[909,636,593,792],()=>t(5536)),_N_E=e.O()}]);